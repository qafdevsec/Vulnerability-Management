#pragma checksum "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "7f3ec3115ad7d8903989191e9df80e237cd2b566"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shared_Partials_Attachment_AttachmentLoader), @"mvc.1.0.view", @"/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml")]
[assembly:global::Microsoft.AspNetCore.Mvc.Razor.Compilation.RazorViewAttribute(@"/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml", typeof(AspNetCore.Views_Shared_Partials_Attachment_AttachmentLoader))]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#line 1 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager;

#line default
#line hidden
#line 2 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager.Models;

#line default
#line hidden
#line 3 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using BlogPortal.Core.BussinessTemplatesModel.BlogPost;

#line default
#line hidden
#line 4 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using ProjectSupport.Core.Models;

#line default
#line hidden
#line 5 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager.Services;

#line default
#line hidden
#line 6 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager.Classes;

#line default
#line hidden
#line 7 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using ProjectSupport.DbUtilities;

#line default
#line hidden
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"7f3ec3115ad7d8903989191e9df80e237cd2b566", @"/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f36603d3ed9f9e6c5706ec0778aeac1f65beeaa1", @"/Views/_ViewImports.cshtml")]
    public class Views_Shared_Partials_Attachment_AttachmentLoader : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<AttachmentUploadObject>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            BeginContext(31, 4, true);
            WriteLiteral("\r\n\r\n");
            EndContext();
#line 4 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
 if (Model.IsReadOnly && !Model.Attachments.Any(a => !string.IsNullOrEmpty(a.FilePhysicalName)))
{
    return;
}

#line default
#line hidden
            BeginContext(152, 279, true);
            WriteLiteral(@"


<style>
    .attachment-progress-bg {
        background-color: #c5c3be !important;
    }


    .h-p35 {
        height: 35px;
    }

    #inputForCopyToClipbord {
        position: fixed;
        top: -10000px;
        left: -10000px;
    }
</style>



");
            EndContext();
#line 30 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
   string attachmentCard = @Model.AttachmentsIDs_FieldName + "_card"; 

#line default
#line hidden
            BeginContext(504, 6, true);
            WriteLiteral("\r\n<div");
            EndContext();
            BeginWriteAttribute("class", " class=\"", 510, "\"", 544, 3);
            WriteAttributeValue("", 518, "w-100", 518, 5, true);
#line 32 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue(" ", 523, attachmentCard, 524, 15, false);

#line default
#line hidden
            WriteAttributeValue(" ", 539, "mb-5", 540, 5, true);
            EndWriteAttribute();
            BeginContext(545, 5, true);
            WriteLiteral(">\r\n\r\n");
            EndContext();
#line 34 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
      
        string ids = "";
        if (Model.Attachments != null && Model.Attachments.Where(a => !string.IsNullOrEmpty(a.FilePhysicalName)).ToList().Count > 0)
        {
            ids = string.Join(",", Model.Attachments.Select(a => a.FilePhysicalName));
        }
    

#line default
#line hidden
            BeginContext(835, 12, true);
            WriteLiteral("\r\n    <input");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 847, "\"", 883, 1);
#line 42 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 852, Model.AttachmentsIDs_FieldName, 852, 31, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("name", " name=\"", 884, "\"", 922, 1);
#line 42 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 891, Model.AttachmentsIDs_FieldName, 891, 31, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("value", " value=\"", 923, "\"", 935, 1);
#line 42 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 931, ids, 931, 4, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(936, 20, true);
            WriteLiteral(" class=\"d-none\" />\r\n");
            EndContext();
#line 43 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
     if (!Model.Do_not_insert_formId_and_Mac_inputs)
    {

#line default
#line hidden
            BeginContext(1017, 40, true);
            WriteLiteral("        <input id=\"FormId\" name=\"FormId\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 1057, "\"", 1078, 1);
#line 45 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1065, Model.FormId, 1065, 13, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1079, 54, true);
            WriteLiteral(" class=\"d-none\" />\r\n        <input id=\"Mac\" name=\"Mac\"");
            EndContext();
            BeginWriteAttribute("value", " value=\"", 1133, "\"", 1151, 1);
#line 46 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1141, Model.Mac, 1141, 10, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1152, 20, true);
            WriteLiteral(" class=\"d-none\" />\r\n");
            EndContext();
#line 47 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }

#line default
#line hidden
            BeginContext(1179, 2, true);
            WriteLiteral("\r\n");
            EndContext();
#line 49 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
       string uploadTagName = @Model.AttachmentsIDs_FieldName + "_SelectedFile"; 

#line default
#line hidden
            BeginContext(1265, 4, true);
            WriteLiteral("    ");
            EndContext();
#line 50 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
     if (Model.IsMultiple)
    {

#line default
#line hidden
            BeginContext(1300, 14, true);
            WriteLiteral("        <input");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 1314, "\"", 1333, 1);
#line 52 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1319, uploadTagName, 1319, 14, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1334, 39, true);
            WriteLiteral(" type=\"file\" class=\"d-none\" multiple>\r\n");
            EndContext();
#line 53 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }
    else
    {

#line default
#line hidden
            BeginContext(1397, 14, true);
            WriteLiteral("        <input");
            EndContext();
            BeginWriteAttribute("id", " id=\"", 1411, "\"", 1430, 1);
#line 56 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1416, uploadTagName, 1416, 14, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(1431, 30, true);
            WriteLiteral(" type=\"file\" class=\"d-none\">\r\n");
            EndContext();
#line 57 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }

#line default
#line hidden
            BeginContext(1468, 90, true);
            WriteLiteral("\r\n    <div class=\"card-body text-left\">\r\n        <h5 class=\" mb-0 mr-auto d-inline-block\">");
            EndContext();
            BeginContext(1559, 20, false);
#line 60 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                            Write(Model.ParagraphTitle);

#line default
#line hidden
            EndContext();
            BeginContext(1579, 7, true);
            WriteLiteral("</h5>\r\n");
            EndContext();
#line 61 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
         if (!Model.IsReadOnly)
        {

#line default
#line hidden
            BeginContext(1630, 148, true);
            WriteLiteral("            <div class=\"btn btn-info btn-sm my-0 ml-4 px-3 d-inline-block\">\r\n                <i class=\"fas fa-plus fa-lg\"></i>\r\n            </div>\r\n");
            EndContext();
#line 66 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
        }

#line default
#line hidden
            BeginContext(1789, 1524, true);
            WriteLiteral(@"    </div>

    <ul tabindex=""1"" class=""flexdatalist-multiple flex0 mt-n2 border attachmentList"" style=""direction:ltr;"">

        <li class=""chip lighten-4 waiting d-none"" fileId="""">
            <div class=""spinner-border spinner-border-sm mr-1"" role=""status"">
                <span class=""sr-only"">Loading...</span>
            </div>
            <span class=""text"">aa aaaaa</span>
            <i class=""fas fa-times fdl-remove"" style=""font-size:15px;""></i>
        </li>

        <li class=""chip lighten-4 inprogress d-none h-p35"" fileId="""">
            <span class=""text"">aa aaaaa</span>
            <i class=""fas fa-times fdl-remove mb-nn6"" style=""font-size:15px;""></i>
            <div class=""progress md-progress mb-1 attachment-progress-bg h-p4 mt-nn6"">
                <div class=""progress-bar"" role=""progressbar"" style=""width: 0%;"" aria-valuenow=""25"" aria-valuemin=""0"" aria-valuemax=""100""></div>
            </div>
        </li>

        <li class=""chip lighten-4 completed  d-none"" fileId="""">
");
            WriteLiteral(@"            <i class=""fas fa-file"" data-toggle=""tooltip"" title="""" url=""""></i>
            <span class=""text"">aa aaaaa</span>
            <i class=""fas fa-times fdl-remove"" style=""font-size:15px;""></i>
        </li>

        <li class=""chip lighten-4 Failed bg-warning d-none"" fileId="""">
            <i class=""fas fa-redo-alt cursor-pointer mr-1""></i>
            <span class=""text"">aa aaaaa</span>
            <i class=""fas fa-times fdl-remove"" style=""font-size:15px;""></i>
        </li>

");
            EndContext();
#line 99 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
         if (Model.Attachments != null)
        {
            foreach (var attach in Model.Attachments.Where(a => !string.IsNullOrEmpty(a.FilePhysicalName)))
            {


#line default
#line hidden
            BeginContext(3491, 52, true);
            WriteLiteral("                <li class=\"chip lighten-4 completed\"");
            EndContext();
            BeginWriteAttribute("fileId", " fileId=\"", 3543, "\"", 3576, 1);
#line 104 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 3552, attach.FilePhysicalName, 3552, 24, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3577, 67, true);
            WriteLiteral(">\r\n                    <i class=\"fas fa-file\" data-toggle=\"tooltip\"");
            EndContext();
            BeginWriteAttribute("title", " title=\"", 3644, "\"", 3679, 1);
#line 105 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 3652, attach.FileWebRootFullPath, 3652, 27, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginWriteAttribute("url", " url=\"", 3680, "\"", 3713, 1);
#line 105 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 3686, attach.FileWebRootFullPath, 3686, 27, false);

#line default
#line hidden
            EndWriteAttribute();
            BeginContext(3714, 46, true);
            WriteLiteral("></i>\r\n                    <span class=\"text\">");
            EndContext();
            BeginContext(3761, 22, false);
#line 106 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                  Write(attach.FileVirtualName);

#line default
#line hidden
            EndContext();
            BeginContext(3783, 9, true);
            WriteLiteral("</span>\r\n");
            EndContext();
#line 107 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                     if (!Model.IsReadOnly)
                    {

#line default
#line hidden
            BeginContext(3860, 89, true);
            WriteLiteral("                        <i class=\"fas fa-times fdl-remove\" style=\"font-size:15px;\"></i>\r\n");
            EndContext();
#line 110 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                    }

#line default
#line hidden
            BeginContext(3972, 23, true);
            WriteLiteral("                </li>\r\n");
            EndContext();
#line 112 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
            }
        }

#line default
#line hidden
            BeginContext(4021, 295, true);
            WriteLiteral(@"    </ul>

    <input type=""text"" value=""Hello World"" id=""inputForCopyToClipbord"">


</div>



<script>



    $(document).ready(function () {

            //---------------------------------------------------------------------------------------
        var attachmentCard = $("".");
            EndContext();
            BeginContext(4317, 14, false);
#line 130 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                            Write(attachmentCard);

#line default
#line hidden
            EndContext();
            BeginContext(4331, 496, true);
            WriteLiteral(@""");
            var attachmentList = attachmentCard.find(""> ul"");
            var attachmentTemplate_Waiting = attachmentList.find(""> li.waiting.d-none"");
            var attachmentTemplate_inprogress = attachmentList.find(""> li.inprogress.d-none"");
            var attachmentTemplate_completed = attachmentList.find(""> li.completed.d-none"");
            var attachmentTemplate_Failed = attachmentList.find(""> li.Failed.d-none"");
            var tempSelectedFiles = attachmentCard.find(""> #");
            EndContext();
            BeginContext(4828, 13, false);
#line 136 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                       Write(uploadTagName);

#line default
#line hidden
            EndContext();
            BeginContext(4841, 71, true);
            WriteLiteral("\");\r\n            var attachmentsIDsListInput = attachmentCard.find(\"> #");
            EndContext();
            BeginContext(4913, 30, false);
#line 137 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                             Write(Model.AttachmentsIDs_FieldName);

#line default
#line hidden
            EndContext();
            BeginContext(4943, 632, true);
            WriteLiteral(@""");
            var numFiles = 0;



        // downloadable: --------------------------------------
        attachmentList.find(""> li.completed:not(.d-none)"").dblclick(function () {
            var attach = $(this);
            defineDownloadable(attach);
        });
        attachmentList.find(""> li.completed:not(.d-none)"").each(function () {
            defineUrlCopyEvent(this);
        });
        attachmentList.find(""> li "").each(function () {
            defineDeleteMethod(this);
        });



        function defineDownloadable(attach) {
            var li = $(attach);
            var fileUrl = """);
            EndContext();
            BeginContext(5576, 20, false);
#line 158 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                      Write(Model.DownloadAction);

#line default
#line hidden
            EndContext();
            BeginContext(5596, 1320, true);
            WriteLiteral(@""" +""?filename=""+li.attr(""fileId"");
            window.open(fileUrl);
            return false;
        }

        function defineUrlCopyEvent(attach) {
            var li = $(attach);
            li.find(""> i.fa-file"").click(function () {
                $(""#inputForCopyToClipbord"").val($(this).attr('url'));
                var clipbordInput = document.getElementById(""inputForCopyToClipbord"");
                clipbordInput.select();
                document.execCommand(""copy"");
            });
            return false;
        }




        // remove btn --------------------------------------
        function defineDeleteMethod(attach) {

            if (attach == null || attach.length == 0)
                return;
            var attachment = $(attach);

            attachment.find(""> i.fdl-remove"").off().click(function () {
                deleteAttachment(attachment);
            });
        }




        function deleteAttachment(attach, successCallback) {

            ");
            WriteLiteral(@"if (attach == null || attach.length == 0)
                return;
            var attachment = $(attach);
            var fileId = attachment.attr('fileId');
            if (fileId == null || fileId == undefined || fileId == """") { return; }

            $.ajax({
                    url: """);
            EndContext();
            BeginContext(6917, 18, false);
#line 201 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                     Write(Model.DeleteAction);

#line default
#line hidden
            EndContext();
            BeginContext(6935, 37, true);
            WriteLiteral("\" + \"?fileName=\" + fileId + \"&FormId=");
            EndContext();
            BeginContext(6973, 12, false);
#line 201 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                             Write(Model.FormId);

#line default
#line hidden
            EndContext();
            BeginContext(6985, 5, true);
            WriteLiteral("&Mac=");
            EndContext();
            BeginContext(6991, 9, false);
#line 201 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                               Write(Model.Mac);

#line default
#line hidden
            EndContext();
            BeginContext(7000, 1338, true);
            WriteLiteral(@""",
                    cache: false,
                    contentType: false,
                    processData: false,
                    method: 'Get',
                    type: 'Get', // For jQuery < 1.9
                    success: function (data) {
                        if (data == ""Deleted"" || data ==""Does not exist in current context"") {
                            attachment.closest(""li"").remove();
                            updateAttachment_FileIdsList_Input();
                            if (successCallback != null) {
                                successCallback();
                            }
                        }
                        else {
                            alert(""Error"");
                        }
                    },
                    error: function (xhr, status, error) {
                        alert(""Error - deleting file is Failed"");
                    }
            });
        }





        // choose pannel triger / select new files -");
            WriteLiteral(@"-------------------------------------
        attachmentCard.find("".card-body .btn"").off().click(function () {
            tempSelectedFiles.trigger('click');
        });

        tempSelectedFiles.value = """";
        tempSelectedFiles.change(function (event) {

            var hasOldAttachment = false;
");
            EndContext();
#line 238 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
             if (!Model.IsMultiple)
            {
                

#line default
#line hidden
            BeginContext(8412, 375, true);
            WriteLiteral(@"
                    attachmentList.find(""> li:not(.d-none)"").each(function () {

                        hasOldAttachment = true;
                        var attach = $(this);
                        deleteAttachment(attach, function () {
                            tempSelectedFiles.change();
                        });

                    });
                ");
            EndContext();
#line 250 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                       
            }

#line default
#line hidden
            BeginContext(8811, 3502, true);
            WriteLiteral(@"
            if (hasOldAttachment)
                return;

            for (var i = 0; i < this.files.length; i++) {
                var file = this.files[i];
                var newAttachment = attachmentTemplate_Waiting.clone();
                newAttachment.removeClass(""d-none"");
                newAttachment.attr('id', new Date().getTime());
                newAttachment.data(""fileContent"", file);
                newAttachment.find("".text"").text(file.name);
                defineDeleteMethod(newAttachment);

                attachmentList.append(newAttachment);
            }
            this.value = """";
            startUploadQueue();
        }); // file change





        // initiate download ----------------------------------------------------------------------
        function startUploadQueue() {
            if (attachmentList.find(""> li.inprogress:not(.d-none)"").length > 0) { return;}
            var waitingAttachments = attachmentList.find(""> li.waiting:not(.d-none)"");
 ");
            WriteLiteral(@"           if (waitingAttachments.length == 0) { return; }

            var firstWaitingAttachment = waitingAttachments.first();
            uploadFileToServer(firstWaitingAttachment);
        }// startUploadQueue


        function convertToNewAttachment(oldAttach, dstType) {

            if (oldAttach == null) {
                console.log(""Source attachment is null!"");
                return;
            }

            var newAttachment;
            if (dstType == ""Inprogress"") {

                newAttachment = attachmentTemplate_inprogress.clone();

            } else if (dstType == ""Complated"") {

                newAttachment = attachmentTemplate_completed.clone();
                newAttachment.dblclick(function () {
                    defineDownloadable($(this));
                });
                defineUrlCopyEvent(newAttachment);

            } else if (dstType == ""Failed"") {

                newAttachment = attachmentTemplate_Failed.clone();
                newAttach");
            WriteLiteral(@"ment.find(""> i.fa-redo-alt"").click(function () {
                    uploadFileToServer(newAttachment);
                });

            } else if (dstType == ""Waiting"") {

                newAttachment = attachmentTemplate_Waiting.clone();

            }


            newAttachment.data(""fileContent"", oldAttach.data(""fileContent""));
            newAttachment.attr('id', oldAttach.attr(""id""));
            newAttachment.attr('fileId', oldAttach.attr(""fileId""));
            newAttachment.data('endByte', oldAttach.data(""endByte""));
            newAttachment.find("".text"").text(oldAttach.find("".text"").text());
            newAttachment.data('fileContent', oldAttach.data(""fileContent""));
            newAttachment.removeClass(""d-none"");


            defineDeleteMethod(newAttachment);


            return newAttachment;
        }


        // upload ----------------------------------------------------------------------
        function uploadFileToServer(attachment) {

            var In");
            WriteLiteral(@"progress_Attach = convertToNewAttachment(attachment, ""Inprogress"");
            attachment.replaceWith(Inprogress_Attach);

            var file = Inprogress_Attach.data(""fileContent"");
            if (Inprogress_Attach.attr(""fileId"") == """" ||
                Inprogress_Attach.attr(""fileId"") == null ||
                Inprogress_Attach.attr(""fileId"") == undefined) {

                $.ajax({
                    url: """);
            EndContext();
            BeginContext(12314, 25, false);
#line 348 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                     Write(Model.GetUniqueUploadName);

#line default
#line hidden
            EndContext();
            BeginContext(12339, 40, true);
            WriteLiteral("\" + \"?fileName=\" + file.name + \"&FormId=");
            EndContext();
            BeginContext(12380, 12, false);
#line 348 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                       Write(Model.FormId);

#line default
#line hidden
            EndContext();
            BeginContext(12392, 5, true);
            WriteLiteral("&Mac=");
            EndContext();
            BeginContext(12398, 9, false);
#line 348 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                         Write(Model.Mac);

#line default
#line hidden
            EndContext();
            BeginContext(12407, 26, true);
            WriteLiteral("&AttachmentsIDs_FieldName=");
            EndContext();
            BeginContext(12434, 30, false);
#line 348 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                                                             Write(Model.AttachmentsIDs_FieldName);

#line default
#line hidden
            EndContext();
            BeginContext(12464, 1539, true);
            WriteLiteral(@""",
                    cache: false,
                    contentType: false,
                    processData: false,
                    method: 'Get',
                    type: 'Get', // For jQuery < 1.9
                    success: function (data) {

                        Inprogress_Attach.attr(""fileId"", data);
                        Inprogress_Attach.data(""endByte"", 0);
                        requestByteToEnd(file, file.size, Inprogress_Attach);

                    },
                    error: function (xhr, status, error) {

                        var newFailedAttachment = convertToNewAttachment(Inprogress_Attach, ""Failed"");
                        Inprogress_Attach.replaceWith(newFailedAttachment);
                        startUploadQueue();
                    }
                });

            } else { // file has got a Unique name already

                requestByteToEnd(file, file.size, newInprogressAttachment);
            }

        }; //uploadFileToServer



");
            WriteLiteral(@"

        function requestByteToEnd(file, lastByte, attachment) {

            var byte = attachment.data(""endByte"");
            if (!Number.isInteger(byte)) { byte = 0; }

            var endByte = byte + 500000;
            if (endByte > lastByte) { endByte = lastByte; }

            var _blob = file.slice(byte, endByte);
            var myFormData = new FormData();
            myFormData.append('files', _blob); //myFormData.append('file-0', _blob);

            $.ajax({
                url: """);
            EndContext();
            BeginContext(14004, 18, false);
#line 393 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                 Write(Model.UploadAction);

#line default
#line hidden
            EndContext();
            BeginContext(14022, 56, true);
            WriteLiteral("\" + \"?fileName=\" + attachment.attr(\"fileId\") + \"&FormId=");
            EndContext();
            BeginContext(14079, 12, false);
#line 393 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                            Write(Model.FormId);

#line default
#line hidden
            EndContext();
            BeginContext(14091, 5, true);
            WriteLiteral("&Mac=");
            EndContext();
            BeginContext(14097, 9, false);
#line 393 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                              Write(Model.Mac);

#line default
#line hidden
            EndContext();
            BeginContext(14106, 825, true);
            WriteLiteral(@""",
                data: myFormData,
                cache: false,
                contentType: false,
                processData: false,
                method: 'POST',
                type: 'POST', // For jQuery < 1.9
                success: function (data) {
                    attachment.data(""endByte"", endByte);

                    //update progress
                    var prograss = ((100 * endByte) / lastByte).toFixed(0).toString();
                    attachment.find("".progress-bar"").css(""width"", prograss + '%');

                    if (endByte < lastByte) {
                        requestByteToEnd(file, lastByte, attachment);
                    }
                    else {

                        // GET FULL URL
                        $.ajax({
                            url: """);
            EndContext();
            BeginContext(14932, 28, false);
#line 414 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                             Write(Model.GetFileWebRootFullPath);

#line default
#line hidden
            EndContext();
            BeginContext(14960, 56, true);
            WriteLiteral("\" + \"?fileName=\" + attachment.attr(\'fileId\') + \"&FormId=");
            EndContext();
            BeginContext(15017, 12, false);
#line 414 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                                  Write(Model.FormId);

#line default
#line hidden
            EndContext();
            BeginContext(15029, 5, true);
            WriteLiteral("&Mac=");
            EndContext();
            BeginContext(15035, 9, false);
#line 414 "D:\Projects\Pentest Report Management\05. Pentest_Manager\b11 Pentest_Manager\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                                                    Write(Model.Mac);

#line default
#line hidden
            EndContext();
            BeginContext(15044, 2164, true);
            WriteLiteral(@""",
                            cache: false,
                            contentType: false,
                            processData: false,
                            method: 'Get',
                            type: 'Get', // For jQuery < 1.9
                            success: function (data) {

                                //change to complated
                                var newCompletedAttachment = convertToNewAttachment(attachment, ""Complated"");
                                attachment.replaceWith(newCompletedAttachment);

                                newCompletedAttachment.find("".fa-file"").attr('title', data);
                                newCompletedAttachment.find("".fa-file"").attr('url', data);

                                // add id to ids list
                                updateAttachment_FileIdsList_Input();
                                startUploadQueue();

                            },
                            error: function (xhr, status, error) ");
            WriteLiteral(@"{
                                var newFailedAttachment = convertToNewAttachment(attachment, ""Failed"");
                                attachment.replaceWith(newFailedAttachment);
                            }
                        });


                    }// it's upload finalized

                }, error: function (xhr, status, error) {  // upload Failed

                    // change to Faileded
                    var newFailedAttachment = convertToNewAttachment(attachment, ""Failed"");
                    attachment.replaceWith(newFailedAttachment);
                    startUploadQueue();
                }
            }); // ajax

        }//end of requestByteToEnd



        function updateAttachment_FileIdsList_Input() {
                var result = """";
                attachmentList.find(""> li.completed:not(.d-none)"").each(function () {
                    var liAttach = $(this);
                    result += liAttach.attr('fileId') + "","";

            });
           ");
            WriteLiteral("     attachmentsIDsListInput.attr(\"value\", result);\r\n            }\r\n\r\n\r\n    }); // document ready\r\n\r\n</script>\r\n\r\n\r\n");
            EndContext();
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<AttachmentUploadObject> Html { get; private set; }
    }
}
#pragma warning restore 1591
