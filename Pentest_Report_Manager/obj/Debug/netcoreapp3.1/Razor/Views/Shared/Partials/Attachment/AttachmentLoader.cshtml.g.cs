#pragma checksum "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml" "{ff1816ec-aa5e-4d10-87f7-6f4963833460}" "3e0e89b01a434f7b382d9a4f0fa40a3310715748"
// <auto-generated/>
#pragma warning disable 1591
[assembly: global::Microsoft.AspNetCore.Razor.Hosting.RazorCompiledItemAttribute(typeof(AspNetCore.Views_Shared_Partials_Attachment_AttachmentLoader), @"mvc.1.0.view", @"/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml")]
namespace AspNetCore
{
    #line hidden
    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Threading.Tasks;
    using Microsoft.AspNetCore.Mvc;
    using Microsoft.AspNetCore.Mvc.Rendering;
    using Microsoft.AspNetCore.Mvc.ViewFeatures;
#nullable restore
#line 1 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager;

#line default
#line hidden
#nullable disable
#nullable restore
#line 2 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 3 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using BlogPortal.Core.BussinessTemplatesModel.BlogPost;

#line default
#line hidden
#nullable disable
#nullable restore
#line 4 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using ProjectSupport.Core.Models;

#line default
#line hidden
#nullable disable
#nullable restore
#line 5 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager.Services;

#line default
#line hidden
#nullable disable
#nullable restore
#line 6 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using Pentest_Report_Manager.Classes;

#line default
#line hidden
#nullable disable
#nullable restore
#line 7 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\_ViewImports.cshtml"
using ProjectSupport.DbUtilities;

#line default
#line hidden
#nullable disable
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"3e0e89b01a434f7b382d9a4f0fa40a3310715748", @"/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml")]
    [global::Microsoft.AspNetCore.Razor.Hosting.RazorSourceChecksumAttribute(@"SHA1", @"f36603d3ed9f9e6c5706ec0778aeac1f65beeaa1", @"/Views/_ViewImports.cshtml")]
    public class Views_Shared_Partials_Attachment_AttachmentLoader : global::Microsoft.AspNetCore.Mvc.Razor.RazorPage<AttachmentUploadObject>
    {
        #pragma warning disable 1998
        public async override global::System.Threading.Tasks.Task ExecuteAsync()
        {
            WriteLiteral("\r\n\r\n");
#nullable restore
#line 4 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
 if (Model.IsReadOnly && Model.Attachments.All(a => string.IsNullOrEmpty(a.FilePhysicalName)))
{
    return;
}

#line default
#line hidden
#nullable disable
            WriteLiteral(@"


<style>
    .attachment-progress-bg {
        background-color: #c5c3be !important;
    }


    .h-p35 {
        height: 35px;
    }

    #inputForCopyToClipbord {
        position: fixed;
        top: -10000px;
        left: -10000px;
    }
</style>



");
#nullable restore
#line 30 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
   string attachmentCard = @Model.AttachmentsIDs_FieldName + "_card"; 

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div");
            BeginWriteAttribute("class", " class=\"", 508, "\"", 542, 3);
            WriteAttributeValue("", 516, "w-100", 516, 5, true);
#nullable restore
#line 32 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue(" ", 521, attachmentCard, 522, 15, false);

#line default
#line hidden
#nullable disable
            WriteAttributeValue(" ", 537, "mb-5", 538, 5, true);
            EndWriteAttribute();
            WriteLiteral(">\r\n\r\n");
#nullable restore
#line 34 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
      
        string ids = "";
        if (Model.Attachments != null && Model.Attachments.Where(a => !string.IsNullOrEmpty(a.FilePhysicalName)).ToList().Count > 0)
        {
            ids = string.Join(",", Model.Attachments.Select(a => a.FilePhysicalName));
        }
    

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n    <input");
            BeginWriteAttribute("id", " id=\"", 845, "\"", 881, 1);
#nullable restore
#line 42 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 850, Model.AttachmentsIDs_FieldName, 850, 31, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("name", " name=\"", 882, "\"", 920, 1);
#nullable restore
#line 42 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 889, Model.AttachmentsIDs_FieldName, 889, 31, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("value", " value=\"", 921, "\"", 933, 1);
#nullable restore
#line 42 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 929, ids, 929, 4, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"d-none\" />\r\n");
#nullable restore
#line 43 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
     if (!Model.Do_not_insert_formId_and_Mac_inputs)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <input id=\"FormId\" name=\"FormId\"");
            BeginWriteAttribute("value", " value=\"", 1055, "\"", 1076, 1);
#nullable restore
#line 45 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1063, Model.FormId, 1063, 13, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"d-none\" />\r\n        <input id=\"Mac\" name=\"Mac\"");
            BeginWriteAttribute("value", " value=\"", 1131, "\"", 1149, 1);
#nullable restore
#line 46 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1139, Model.Mac, 1139, 10, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" class=\"d-none\" />\r\n");
#nullable restore
#line 47 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n");
#nullable restore
#line 49 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
       string uploadTagName = @Model.AttachmentsIDs_FieldName + "_SelectedFile"; 

#line default
#line hidden
#nullable disable
#nullable restore
#line 50 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
     if (Model.IsMultiple)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <input");
            BeginWriteAttribute("id", " id=\"", 1312, "\"", 1331, 1);
#nullable restore
#line 52 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1317, uploadTagName, 1317, 14, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" type=\"file\" class=\"d-none\" multiple>\r\n");
#nullable restore
#line 53 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }
    else
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <input");
            BeginWriteAttribute("id", " id=\"", 1409, "\"", 1428, 1);
#nullable restore
#line 56 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 1414, uploadTagName, 1414, 14, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(" type=\"file\" class=\"d-none\">\r\n");
#nullable restore
#line 57 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral("\r\n<div class=\"card-body text-left\">\r\n");
#nullable restore
#line 60 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
     if (Model.ShowTitle)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <h5 class=\" mb-0 mr-auto d-inline-block\">");
#nullable restore
#line 62 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                            Write(Model.ParagraphTitle);

#line default
#line hidden
#nullable disable
            WriteLiteral("</h5>\r\n");
#nullable restore
#line 63 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }

#line default
#line hidden
#nullable disable
#nullable restore
#line 64 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
     if (!Model.IsReadOnly)
    {

#line default
#line hidden
#nullable disable
            WriteLiteral("        <div class=\"btn btn-info btn-sm my-0 ml-4 px-3 d-inline-block\">\r\n            <i class=\"fas fa-plus fa-lg\"></i>\r\n        </div>\r\n");
#nullable restore
#line 69 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
    }

#line default
#line hidden
#nullable disable
            WriteLiteral("</div>\r\n\r\n    <ul tabindex=\"1\" class=\"flexdatalist-multiple flex0 mt-n2 border attachmentList\" style=\"direction:ltr;\">\r\n\r\n        <li class=\"chip lighten-4 waiting d-none\"");
            BeginWriteAttribute("fileId", " fileId=\"", 1971, "\"", 1980, 0);
            EndWriteAttribute();
            WriteLiteral(@">
            <div class=""spinner-border spinner-border-sm mr-1"" role=""status"">
                <span class=""sr-only"">Loading...</span>
            </div>
            <span class=""text"">aa aaaaa</span>
            <i class=""fas fa-times fdl-remove"" style=""font-size:15px;""></i>
        </li>

        <li class=""chip lighten-4 inprogress d-none h-p35""");
            BeginWriteAttribute("fileId", " fileId=\"", 2340, "\"", 2349, 0);
            EndWriteAttribute();
            WriteLiteral(@">
            <span class=""text"">aa aaaaa</span>
            <i class=""fas fa-times fdl-remove mb-nn6"" style=""font-size:15px;""></i>
            <div class=""progress md-progress mb-1 attachment-progress-bg h-p4 mt-nn6"">
                <div class=""progress-bar"" role=""progressbar"" style=""width: 0%;"" aria-valuenow=""25"" aria-valuemin=""0"" aria-valuemax=""100""></div>
            </div>
        </li>

        <li class=""chip lighten-4 completed  d-none""");
            BeginWriteAttribute("fileId", " fileId=\"", 2807, "\"", 2816, 0);
            EndWriteAttribute();
            WriteLiteral(">\r\n            <i class=\"fas fa-file\" data-toggle=\"tooltip\"");
            BeginWriteAttribute("title", " title=\"", 2876, "\"", 2884, 0);
            EndWriteAttribute();
            BeginWriteAttribute("url", " url=\"", 2885, "\"", 2891, 0);
            EndWriteAttribute();
            WriteLiteral("></i>\r\n            <span class=\"text\">aa aaaaa</span>\r\n            <i class=\"fas fa-times fdl-remove\" style=\"font-size:15px;\"></i>\r\n        </li>\r\n\r\n        <li class=\"chip lighten-4 Failed bg-warning d-none\"");
            BeginWriteAttribute("fileId", " fileId=\"", 3100, "\"", 3109, 0);
            EndWriteAttribute();
            WriteLiteral(">\r\n            <i class=\"fas fa-redo-alt cursor-pointer mr-1\"></i>\r\n            <span class=\"text\">aa aaaaa</span>\r\n            <i class=\"fas fa-times fdl-remove\" style=\"font-size:15px;\"></i>\r\n        </li>\r\n\r\n");
#nullable restore
#line 102 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
         if (Model.Attachments != null)
        {
            foreach (var attach in Model.Attachments.Where(a => !string.IsNullOrEmpty(a.FilePhysicalName)))
            {


#line default
#line hidden
#nullable disable
            WriteLiteral("                <li class=\"chip lighten-4 completed\"");
            BeginWriteAttribute("fileId", " fileId=\"", 3550, "\"", 3583, 1);
#nullable restore
#line 107 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 3559, attach.FilePhysicalName, 3559, 24, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("fileVirtualName", " fileVirtualName=\"", 3584, "\"", 3625, 1);
#nullable restore
#line 107 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 3602, attach.FileVirtualName, 3602, 23, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral(">\r\n                    <i class=\"fas fa-file\" data-toggle=\"tooltip\"");
            BeginWriteAttribute("title", " title=\"", 3693, "\"", 3728, 1);
#nullable restore
#line 108 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 3701, attach.FileWebRootFullPath, 3701, 27, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            BeginWriteAttribute("url", " url=\"", 3729, "\"", 3762, 1);
#nullable restore
#line 108 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
WriteAttributeValue("", 3735, attach.FileWebRootFullPath, 3735, 27, false);

#line default
#line hidden
#nullable disable
            EndWriteAttribute();
            WriteLiteral("></i>\r\n                    <span class=\"text\">");
#nullable restore
#line 109 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                  Write(attach.FileVirtualName);

#line default
#line hidden
#nullable disable
            WriteLiteral("</span>\r\n");
#nullable restore
#line 110 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                     if (!Model.IsReadOnly)
                    {

#line default
#line hidden
#nullable disable
            WriteLiteral("                        <i class=\"fas fa-times fdl-remove\" style=\"font-size:15px;\"></i>\r\n");
#nullable restore
#line 113 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                    }

#line default
#line hidden
#nullable disable
            WriteLiteral("                </li>\r\n");
#nullable restore
#line 115 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
            }
        }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"    </ul>

    <input type=""text"" value=""Hello World"" id=""inputForCopyToClipbord"">


</div>



<script>



    $(document).ready(function () {

            //---------------------------------------------------------------------------------------
        var attachmentCard = $("".");
#nullable restore
#line 133 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                            Write(attachmentCard);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""");
            var attachmentList = attachmentCard.find(""> ul"");
            var attachmentTemplate_Waiting = attachmentList.find(""> li.waiting.d-none"");
            var attachmentTemplate_inprogress = attachmentList.find(""> li.inprogress.d-none"");
            var attachmentTemplate_completed = attachmentList.find(""> li.completed.d-none"");
            var attachmentTemplate_Failed = attachmentList.find(""> li.Failed.d-none"");
            var tempSelectedFiles = attachmentCard.find(""> #");
#nullable restore
#line 139 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                       Write(uploadTagName);

#line default
#line hidden
#nullable disable
            WriteLiteral("\");\r\n            var attachmentsIDsListInput = attachmentCard.find(\"> #");
#nullable restore
#line 140 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                             Write(Model.AttachmentsIDs_FieldName);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""");
            var numFiles = 0;



        // downloadable: --------------------------------------
        attachmentList.find(""> li.completed:not(.d-none)"").dblclick(function () {
            var attach = $(this);
            defineDownloadable(attach);
        });
        attachmentList.find(""> li.completed:not(.d-none)"").each(function () {
            defineUrlCopyEvent(this);
        });
        attachmentList.find(""> li "").each(function () {
            defineDeleteMethod(this);
        });



        function defineDownloadable(attach) {
            var li = $(attach);
            var fileUrl = """);
#nullable restore
#line 161 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                      Write(Model.DownloadAction);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""" + ""?filename="" + li.attr(""fileId"") + ""&fileVirtualName="" + li.attr(""fileVirtualName"") ;
            window.open(fileUrl);
            return false;
        }

        function defineUrlCopyEvent(attach) {
            var li = $(attach);
            li.find(""> i.fa-file"").click(function () {
                $(""#inputForCopyToClipbord"").val($(this).attr('url'));
                var clipbordInput = document.getElementById(""inputForCopyToClipbord"");
                clipbordInput.select();
                document.execCommand(""copy"");
            });
            return false;
        }




        // remove btn --------------------------------------
        function defineDeleteMethod(attach) {

            if (attach == null || attach.length == 0)
                return;
            var attachment = $(attach);

            attachment.find(""> i.fdl-remove"").off().click(function () {
                deleteAttachment(attachment);
            });
        }




        function dele");
            WriteLiteral(@"teAttachment(attach, successCallback) {

            if (attach == null || attach.length == 0)
                return;
            var attachment = $(attach);
            var fileId = attachment.attr('fileId');
            if (fileId == null || fileId == undefined || fileId == """") { return; }

            $.ajax({
                    url: """);
#nullable restore
#line 204 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                     Write(Model.DeleteAction);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" + \"?fileName=\" + fileId + \"&FormId=");
#nullable restore
#line 204 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                             Write(Model.FormId);

#line default
#line hidden
#nullable disable
            WriteLiteral("&Mac=");
#nullable restore
#line 204 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                               Write(Model.Mac);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                    cache: false,
                    contentType: false,
                    processData: false,
                    method: 'Get',
                    type: 'Get', // For jQuery < 1.9
                    success: function (data) {
                        if (data == ""Deleted"" || data ==""Does not exist in current context"") {
                            attachment.closest(""li"").remove();
                            updateAttachment_FileIdsList_Input();
                            if (successCallback != null) {
                                successCallback();
                            }
                        }
                        else {
                            alert(""Error"");
                        }
                    },
                    error: function (xhr, status, error) {
                        alert(""Error - deleting file is Failed"");
                    }
            });
        }





        // choose pannel triger / select new files -");
            WriteLiteral(@"-------------------------------------
        attachmentCard.find("".card-body .btn"").off().click(function () {
            tempSelectedFiles.trigger('click');
        });

        tempSelectedFiles.value = """";
        tempSelectedFiles.change(function (event) {

            var hasOldAttachment = false;
");
#nullable restore
#line 241 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
             if (!Model.IsMultiple)
            {
                

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
                    attachmentList.find(""> li:not(.d-none)"").each(function () {

                        hasOldAttachment = true;
                        var attach = $(this);
                        deleteAttachment(attach, function () {
                            tempSelectedFiles.change();
                        });

                    });
                ");
#nullable restore
#line 253 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                       
            }

#line default
#line hidden
#nullable disable
            WriteLiteral(@"
            if (hasOldAttachment)
                return;

            for (var i = 0; i < this.files.length; i++) {
                var file = this.files[i];
                var newAttachment = attachmentTemplate_Waiting.clone();
                newAttachment.removeClass(""d-none"");
                newAttachment.attr('id', new Date().getTime());
                newAttachment.data(""fileContent"", file);
                newAttachment.find("".text"").text(file.name);
                defineDeleteMethod(newAttachment);

                attachmentList.append(newAttachment);
            }
            this.value = """";
            startUploadQueue();
        }); // file change





        // initiate download ----------------------------------------------------------------------
        function startUploadQueue() {
            if (attachmentList.find(""> li.inprogress:not(.d-none)"").length > 0) { return;}
            var waitingAttachments = attachmentList.find(""> li.waiting:not(.d-none)"");
 ");
            WriteLiteral(@"           if (waitingAttachments.length == 0) { return; }

            var firstWaitingAttachment = waitingAttachments.first();
            uploadFileToServer(firstWaitingAttachment);
        }// startUploadQueue


        function convertToNewAttachment(oldAttach, dstType) {

            if (oldAttach == null) {
                console.log(""Source attachment is null!"");
                return;
            }

            var newAttachment;
            if (dstType == ""Inprogress"") {

                newAttachment = attachmentTemplate_inprogress.clone();

            } else if (dstType == ""Complated"") {

                newAttachment = attachmentTemplate_completed.clone();
                newAttachment.dblclick(function () {
                    defineDownloadable($(this));
                });
                defineUrlCopyEvent(newAttachment);

            } else if (dstType == ""Failed"") {

                newAttachment = attachmentTemplate_Failed.clone();
                newAttach");
            WriteLiteral(@"ment.find(""> i.fa-redo-alt"").click(function () {
                    uploadFileToServer(newAttachment);
                });

            } else if (dstType == ""Waiting"") {

                newAttachment = attachmentTemplate_Waiting.clone();

            }


            newAttachment.data(""fileContent"", oldAttach.data(""fileContent""));
            newAttachment.attr('id', oldAttach.attr(""id""));
            newAttachment.attr('fileId', oldAttach.attr(""fileId""));
            newAttachment.data('endByte', oldAttach.data(""endByte""));
            newAttachment.find("".text"").text(oldAttach.find("".text"").text());
            newAttachment.data('fileContent', oldAttach.data(""fileContent""));
            newAttachment.removeClass(""d-none"");


            defineDeleteMethod(newAttachment);


            return newAttachment;
        }


        // upload ----------------------------------------------------------------------
        function uploadFileToServer(attachment) {

            var In");
            WriteLiteral(@"progress_Attach = convertToNewAttachment(attachment, ""Inprogress"");
            attachment.replaceWith(Inprogress_Attach);

            var file = Inprogress_Attach.data(""fileContent"");
            if (Inprogress_Attach.attr(""fileId"") == """" ||
                Inprogress_Attach.attr(""fileId"") == null ||
                Inprogress_Attach.attr(""fileId"") == undefined) {

                $.ajax({
                    url: """);
#nullable restore
#line 351 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                     Write(Model.GetUniqueUploadName);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" + \"?fileName=\" + file.name + \"&FormId=");
#nullable restore
#line 351 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                       Write(Model.FormId);

#line default
#line hidden
#nullable disable
            WriteLiteral("&Mac=");
#nullable restore
#line 351 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                         Write(Model.Mac);

#line default
#line hidden
#nullable disable
            WriteLiteral("&AttachmentsIDs_FieldName=");
#nullable restore
#line 351 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                                                             Write(Model.AttachmentsIDs_FieldName);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                    cache: false,
                    contentType: false,
                    processData: false,
                    method: 'Get',
                    type: 'Get', // For jQuery < 1.9
                    success: function (data) {

                        Inprogress_Attach.attr(""fileId"", data);
                        Inprogress_Attach.data(""endByte"", 0);
                        requestByteToEnd(file, file.size, Inprogress_Attach);

                    },
                    error: function (xhr, status, error) {

                        var newFailedAttachment = convertToNewAttachment(Inprogress_Attach, ""Failed"");
                        Inprogress_Attach.replaceWith(newFailedAttachment);
                        startUploadQueue();
                    }
                });

            } else { // file has got a Unique name already

                requestByteToEnd(file, file.size, newInprogressAttachment);
            }

        }; //uploadFileToServer



");
            WriteLiteral(@"

        function requestByteToEnd(file, lastByte, attachment) {

            var byte = attachment.data(""endByte"");
            if (!Number.isInteger(byte)) { byte = 0; }

            var endByte = byte + 500000;
            if (endByte > lastByte) { endByte = lastByte; }

            var _blob = file.slice(byte, endByte);
            var myFormData = new FormData();
            myFormData.append('files', _blob); //myFormData.append('file-0', _blob);

            $.ajax({
                url: """);
#nullable restore
#line 396 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                 Write(Model.UploadAction);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" + \"?fileName=\" + attachment.attr(\"fileId\") + \"&FormId=");
#nullable restore
#line 396 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                            Write(Model.FormId);

#line default
#line hidden
#nullable disable
            WriteLiteral("&Mac=");
#nullable restore
#line 396 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                              Write(Model.Mac);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                data: myFormData,
                cache: false,
                contentType: false,
                processData: false,
                method: 'POST',
                type: 'POST', // For jQuery < 1.9
                success: function (data) {
                    attachment.data(""endByte"", endByte);

                    //update progress
                    var prograss = ((100 * endByte) / lastByte).toFixed(0).toString();
                    attachment.find("".progress-bar"").css(""width"", prograss + '%');

                    if (endByte < lastByte) {
                        requestByteToEnd(file, lastByte, attachment);
                    }
                    else {

                        // GET FULL URL
                        $.ajax({
                            url: """);
#nullable restore
#line 417 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                             Write(Model.GetFileWebRootFullPath);

#line default
#line hidden
#nullable disable
            WriteLiteral("\" + \"?fileName=\" + attachment.attr(\'fileId\') + \"&FormId=");
#nullable restore
#line 417 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                                  Write(Model.FormId);

#line default
#line hidden
#nullable disable
            WriteLiteral("&Mac=");
#nullable restore
#line 417 "D:\Projects\Demo projects on tantaneh.com\vulnerability management - on vs2019\Pentest_Report_Manager\Views\Shared\Partials\Attachment\AttachmentLoader.cshtml"
                                                                                                                                    Write(Model.Mac);

#line default
#line hidden
#nullable disable
            WriteLiteral(@""",
                            cache: false,
                            contentType: false,
                            processData: false,
                            method: 'Get',
                            type: 'Get', // For jQuery < 1.9
                            success: function (data) {

                                //change to complated
                                var newCompletedAttachment = convertToNewAttachment(attachment, ""Complated"");
                                attachment.replaceWith(newCompletedAttachment);

                                newCompletedAttachment.find("".fa-file"").attr('title', data);
                                newCompletedAttachment.find("".fa-file"").attr('url', data);

                                // add id to ids list
                                updateAttachment_FileIdsList_Input();
                                startUploadQueue();

                            },
                            error: function (xhr, status, error) ");
            WriteLiteral(@"{
                                var newFailedAttachment = convertToNewAttachment(attachment, ""Failed"");
                                attachment.replaceWith(newFailedAttachment);
                            }
                        });


                    }// it's upload finalized

                }, error: function (xhr, status, error) {  // upload Failed

                    // change to Faileded
                    var newFailedAttachment = convertToNewAttachment(attachment, ""Failed"");
                    attachment.replaceWith(newFailedAttachment);
                    startUploadQueue();
                }
            }); // ajax

        }//end of requestByteToEnd



        function updateAttachment_FileIdsList_Input() {
                var result = """";
                attachmentList.find(""> li.completed:not(.d-none)"").each(function () {
                    var liAttach = $(this);
                    result += liAttach.attr('fileId') + "","";

            });
           ");
            WriteLiteral("     attachmentsIDsListInput.attr(\"value\", result);\r\n            }\r\n\r\n\r\n    }); // document ready\r\n\r\n</script>\r\n\r\n\r\n");
        }
        #pragma warning restore 1998
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.ViewFeatures.IModelExpressionProvider ModelExpressionProvider { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IUrlHelper Url { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.IViewComponentHelper Component { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IJsonHelper Json { get; private set; }
        [global::Microsoft.AspNetCore.Mvc.Razor.Internal.RazorInjectAttribute]
        public global::Microsoft.AspNetCore.Mvc.Rendering.IHtmlHelper<AttachmentUploadObject> Html { get; private set; }
    }
}
#pragma warning restore 1591
