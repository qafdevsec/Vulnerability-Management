using Microsoft.AspNetCore.Hosting;
using Microsoft.AspNetCore.Http;
using Microsoft.AspNetCore.Identity;
using Microsoft.Extensions.Caching.Memory;
using System;
using System.Collections.Generic;
using System.Linq;
using System.Threading.Tasks;
using Microsoft.Extensions.DependencyInjection;
using Newtonsoft.Json;
using BlogPortal.Core.BussinessTemplatesModel.BlogPost;
using ProjectSupport.Infrastructure;
using ProjectSupport.Core.Models;

namespace Pentest_Report_Manager.Services
{

    public interface IMy_Service_Provider
    {
        ICacheMemoryProvider cacheMemoryProvider { get; }
        HttpContext httpContext { get; }
        IHttpContextAccessor httpContextAccessor { get; }
        IHostingEnvironment hostingEnvironment { get; }
        ProjectSupportDB projectSupportDB { get; }
        UserManager<ApplicationUser> userManager { get; }

    }



    public class My_Service_Provider : IMy_Service_Provider
    {

        public My_Service_Provider(IHttpContextAccessor _httpContextAccessor,
            ICacheMemoryProvider _cacheMemoryProvider,
            UserManager<ApplicationUser> _userManager, ProjectSupportDB _projectSupportDB) {

            httpContextAccessor = _httpContextAccessor;
            httpContext = _httpContextAccessor.HttpContext;
            cacheMemoryProvider = _cacheMemoryProvider;
            userManager = _userManager;
            projectSupportDB = _projectSupportDB;
        }

        public ICacheMemoryProvider cacheMemoryProvider { get; set;}   //return httpContext.RequestServices.GetService<IMemoryCache>();

        
        public HttpContext httpContext { get; set; }
        public IHttpContextAccessor httpContextAccessor { get; set; }
        public IHostingEnvironment hostingEnvironment { get; set; }
        public ProjectSupportDB projectSupportDB { get; set; }

        public UserManager<ApplicationUser> userManager { get; set; }

    }

    

}

