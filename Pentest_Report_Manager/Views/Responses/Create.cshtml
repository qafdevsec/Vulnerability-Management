@model ProjectSupport.Core.Models.TaskResponse

@{
    ViewData["Title"] = "Create";
}



<style>
    #navbarFixedTop {
        padding-top: 10px !important;
        padding-bottom: 0px !important;
        align-items: stretch;
    }

    #NavbarlinksContainer {
        min-width: 200px !important;
    }
</style>
<nav id="navbarFixedTop" class="navbar navbar-toggleable-md navbar-expand-lg scrolling-navbar double-nav mx-n3 mb-1">

    <!-- title -->
    <div class="d-inline-block pl-3 pr-5 text-left mt-1 mb-2">
        Create a new report for the pentest "@Model.JobTask.Title"
    </div>

</nav>






<style>
    .row form .my-Text-Left {
        text-align: left !important;
    }
</style>




@{ string s = "ASDF";}

<form asp-action="Create"
    asp-all-route-data="MyUtilities.ParseQueryString(((IMy_Service_Provider)ViewBag.sp).httpContext.Request.QueryString.ToString())"
    class="row text-left border border-light p-5 md-form mt-1">

    <input asp-for="JobTask_Ref" hidden asp-items="JobTask_Ref" />
    <input asp-for="ID" hidden asp-items="ID" />
   



    <div class="form-group col-12">
        <input type="text" id="Title" class="form-control" asp-for="@Model.Title" />
        <label for="Title">@Html.DisplayNameFor(m => m.Title)</label>
        <span asp-validation-for="Title" class="text-danger"></span>
    </div>

    <div class="form-group col-12">
        <textarea id="Description" name="Description" class="md-textarea form-control" rows="2">@Html.DisplayFor(m => m.Description)</textarea>
        <label for="Description">@Html.DisplayNameFor(m => m.Description)</label>
        <span asp-validation-for="Description" class="text-danger"></span>
    </div>


    <br /><br /><br /><br /><br /><br />
    <!-- report doc uploader -->


    <h4>Vulnerabilities Lists</h4>

    <div class="md-form amber-textarea active-amber-textarea w-100">
        <i class="fas fa-pencil-alt prefix my-Text-Left"></i>
        <textarea id="highVulnerabilities" name="highVulnerabilities" class="md-textarea form-control myRtL" rows="3" >@ViewBag.hv</textarea>
        <label for="form22">Please insert high/critical vulnerabilites each in a new line</label>
    </div>

    <div class="md-form amber-textarea active-amber-textarea w-100">
        <i class="fas fa-pencil-alt prefix my-Text-Left"></i>
        <textarea id="mediumVulnerabilities" name="mediumVulnerabilities" class="md-textarea form-control myRtL" rows="3">@ViewBag.mv</textarea>
        <label for="form24">Please insert medium vulnerabilites each in a new line</label>
    </div>

    <div class="md-form amber-textarea active-amber-textarea w-100">
        <i class="fas fa-pencil-alt prefix my-Text-Left"></i>
        <textarea id="lowVulnerabilities" name="lowVulnerabilities" class="md-textarea form-control myRtL" rows="3">@ViewBag.lv</textarea>
        <label for="form24">Please insert low vulnerabilites each in a new line</label>
    </div>





    <!-- Sent Leters -->

    <div class="col-12 col-md-6">
        @{
            var urls = new AttachmentUploadObject()
            {
                Attachment = Model.ReportFileAndPDF.DocFile,
                IsMultiple = false,
                ParagraphTitle = "Pentest Report .Docx File",
                AttachmentsIDs_FieldName = "docFileName"
            };
            urls.InitiateFields(ViewBag.sp);
        }
        <partial name="~/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml" for="@urls" />
    </div>



    <div class="col-12 col-md-6">
        @{
            var urls2 = new AttachmentUploadObject()
            {
                Attachment = Model.ReportFileAndPDF.PdfFile,
                IsMultiple = false,
                ParagraphTitle = "Pentest Report .PDF File",
                AttachmentsIDs_FieldName = "pdfFileName",
                Do_not_insert_formId_and_Mac_inputs = true
            };
            urls2.InitiateFields(ViewBag.sp);
        }
        <partial name="~/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml" for="@urls2" />
    </div>




    @{
        var urls3 = new AttachmentUploadObject()
        {
            Attachments = Model.Attachments,
            ParagraphTitle = "Attachments",
            AttachmentsIDs_FieldName = "allAttachments",
            Do_not_insert_formId_and_Mac_inputs = true
        };
        urls3.InitiateFields(ViewBag.sp);
    }
    <partial name="~/Views/Shared/Partials/Attachment/AttachmentLoader.cshtml" for="@urls3" />






    <div asp-validation-summary="ModelOnly" class="alert alert-danger myRtL col-12 mt-5"></div>

    <div class="form-group col-12 mt-5 mb-0 text-center">
        <input type="submit" value="@(ViewBag.isEdit==true? "Apply Changes" : "Create")" class="btn btn-info btn-block btn-md" />
        <a href="~/Projects/@ViewBag.projectId/tasks/@Model.JobTask_Ref" class="btn btn-light btn-md">Cancel</a>
    </div>
</form>




